  <!DOCTYPE html>
  <html lang="es">

  <head>
    <meta charset="utf-8">
    <meta content="width=device-width, initial-scale=1.0" name="viewport">
    <title>Break - Inicio</title>

    <!-- Icono de sitio -->
    <link href="assets/img/favicon.png" rel="icon">

    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,600,600i,700,700i|Raleway:300,300i,400,400i,500,500i,600,600i,700,700i" rel="stylesheet">

    <!-- Archivos externos CSS Files -->
    <link href="assets/vendor/aos/aos.css" rel="stylesheet"> <!-- Animacion del inicio -->
    <link href="../assets/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">
    <link href="../assets/vendor/bootstrap-icons/bootstrap-icons.css" rel="stylesheet">
    <link href="../assets/vendor/boxicons/css/boxicons.min.css" rel="stylesheet">

    <!-- Llama a hoja de estilo -->
    <link href="../css/styleinicio.css" rel="stylesheet">
    <link href="../css/stylenav.css" rel="stylesheet">
    <link href="../css/styleapi.css" rel="stylesheet">
  </head>

  <body>

  <!-- Barra de navegación -->
  <nav class="navbar navbar-expand-lg navbar-light bg-white shadow-sm justify-content-end">
    <a class="navbar-brand" href="./inicio.html">
      <img src="../assets/img/Logo 3.png" alt="Marca"style="height: 140px; width: 150px;">
    </a>    
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarNav">
      <ul class="navbar-nav">
        <li class="nav-item">
          <a class="nav-link" href="./inicio.html">
              <i class="bi bi-person"></i> Perfil
          </a>
      </li>
      <li class="nav-item">
          <a class="nav-link" href="./editar_perfil.html">
              <i class="bi bi-gear"></i> Configuración
          </a>
      </li>
      <li class="nav-item">
          <a class="nav-link" href="./login.html">
              <i class="bi bi-door-closed"></i> Cerrar sesión
          </a>
      </li>
      
      </ul>
    </div>
  </nav>

  <!-- Contenido principal -->
  <div class="container-fluid content">
    <div class="row">
        <!-- Barra lateral izquierda -->
        <div class="col-md-3 sidebar">
            <div class="profile-section">
                <h5>Mi Perfil</h5>
                <img src="https://via.placeholder.com/80" class="rounded-circle mb-3" alt="Foto de perfil">
                <p><strong>Nombre de Usuario</strong></p>
                <p><a href="./editar_perfil.html">Ver perfil</a></p>
                <hr>
                <h6>Enlaces rápidos</h6>
                <ul class="list-unstyled">
                    <li><a href="#">Amigos</a></li>
                    <li><a href="#">Grupos</a></li>
                    <li><a href="#">Eventos</a></li>
                    <li><a href="#">Mensajes</a></li>
                </ul>
            </div>
        </div>

        <!-- Área de publicaciones -->
        <div class="col-md-6 main-content">
            <!-- Publicar nueva actualización -->
            <div class="post-section">
                <h5>¿Qué estás pensando?</h5>
                <form>
                    <div class="form-group">
                        <textarea class="form-control" rows="3" placeholder="Escribe algo..."></textarea>
                    </div><br>
                    <button type="submit" class="btn btn-primary">Publicar</button>
                </form>
            </div>

            <!-- Feed de publicaciones -->
            <div class="feed">
              <!-- Aquí van las publicaciones -->
              <div class="card mb-3">
                  <div class="card-body">
                      <div class="media">
                          <img src="https://via.placeholder.com/40" class="mr-3 rounded-circle" alt="...">
                          <div class="media-body">
                              <h5 class="card-title">Usuario1</h5>
                              <p class="card-text">Esta es una publicación de ejemplo.</p>
                              <p class="card-text"><small class="text-muted">Hace 10 minutos</small></p>
                              <!-- Sección de comentarios -->
                              <div class="comment-section">
                                  <h6>Comentarios</h6>
                                  <div class="media mb-3">
                                      <img src="https://via.placeholder.com/40" class="mr-3 rounded-circle" alt="...">
                                      <div class="media-body">
                                          <h6 class="mt-0">UsuarioA</h6>
                                          ¡Qué interesante publicación!
                                      </div>
                                  </div>
                                  <!-- Formulario para agregar comentario -->
                                  <form>
                                      <div class="form-group">
                                          <textarea class="form-control" rows="2" placeholder="Escribe un comentario..."></textarea>
                                      </div><br>
                                      <button type="submit" class="btn btn-secondary">Comentar</button>
                                  </form>
                              </div>
                          </div>
                      </div>
                  </div>
              </div>

          <!-- Otra publicación -->
          <div class="card mb-3">
            <div class="card-body">
              <h5 class="card-title">Usuario2</h5>
              <p class="card-text">Otra publicación de ejemplo.</p>
              <p class="card-text"><small class="text-muted">Hace 30 minutos</small></p>
              <!-- Sección de comentarios -->
              <div class="comment-section">
                <h6>Comentarios</h6>
                <div class="media mb-3">
                  <img src="https://via.placeholder.com/40" class="mr-3 rounded-circle" alt="...">
                  <div class="media-body">
                    <h6 class="mt-0">UsuarioB</h6>
                    Muy buena información, gracias por compartir.
                  </div>
                </div>
                <!-- Formulario para agregar comentario -->
                <form>
                  <div class="form-group">
                    <textarea class="form-control" rows="2" placeholder="Escribe un comentario..."></textarea>
                  </div>
                  <br>
                  <button type="submit" class="btn btn-secondary">Comentar</button>
                </form>
              </div>
            </div>
          </div>
        </div>
      </div>

     <!-- Barra lateral derecha -->
<div class="col-md-3 sidebar">
  <!-- Aquí van las sugerencias y tendencias -->
  <div class="suggestions-section">
      <h5>Sugerencias de amigos</h5>
      <div class="media mb-3">
          <img src="https://via.placeholder.com/40" class="mr-3 rounded-circle" alt="...">
          <div class="media-body">
              <h6 class="mt-0">UsuarioSugerido1</h6>
              <button class="btn btn-primary btn-sm">Agregar amigo</button>
          </div>
      </div>
      <!-- Más sugerencias -->
  </div>

  <div class="trending-section">
      <h5>Tendencias</h5>
      <ul class="list-unstyled">
          <li><a href="#">#Tendencia1</a></li>
          <li><a href="#">#Tendencia2</a></li>
          <!-- Más tendencias -->
      </ul>
  </div>

  <!-- Últimas noticias API -->
  <div class="container">
      <div id="news-list" class="tarjeta">
          <div class="tarjetanoticias">
              <div class="news-heading">Últimas noticias</div>
              <i class="bi bi-newspaper"></i>
              <h5 class="titulotarjeta" id="news-title"></h5>
              <p class="textotarjeta-text" id="news-description"></p>
              <a href="#" id="news-link" class="btn btn-primary btn-sm" target="_blank">Leer más</a>
              <div class="autorinfo" id="source-info"></div>
              <div class="fechapublicacion" id="published-at"></div>
          </div>
      </div>
  </div>
</div>

</div>

  <!-- Scripts de Bootstrap y jQuery -->
  <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.5.2/dist/umd/popper.min.js"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>

  <script>
  $(document).ready(function() {
      // Animación suave en los enlaces de navegación
      $('nav a').on('click', function(event) {
        if (this.hash !== "") {
          event.preventDefault();
          var hash = this.hash;
          $('html, body').animate({
            scrollTop: $(hash).offset().top
          }, 800, function(){
            window.location.hash = hash;
          });
        }
      });

      // Desplegable animado en la barra de navegación
      $('.navbar-toggler').on('click', function() {
        $('#navbarNav').slideToggle();
      });

      // Publicar actualización sin recargar la página
      $('.post-section form').on('submit', function(event) {
        event.preventDefault();
        var postContent = $(this).find('textarea').val();
        if (postContent) {
          var newPost = `
            <div class="card mb-3">
              <div class="card-body">
                <div class="media">
                  <img src="https://via.placeholder.com/40" class="mr-3 rounded-circle" alt="...">
                  <div class="media-body">
                    <h5 class="card-title">Tu Nombre</h5>
                    <p class="card-text">` + postContent + `</p>
                    <p class="card-text"><small class="text-muted">Justo ahora</small></p>
                    <div class="comment-section">
                      <h6>Comentarios</h6>
                      <form>
                        <div class="form-group">
                          <textarea class="form-control" rows="2" placeholder="Escribe un comentario..."></textarea>
                        </div><br>
                        <button type="submit" class="btn btn-secondary">Comentar</button>
                      </form>
                    </div>
                  </div>
                </div>
              </div>
            </div>`;
          $('.feed').prepend(newPost);
          $(this).find('textarea').val('');
        }
      });

      // Añadir un comentario con efecto de animación
      $(document).on('submit', '.comment-section form', function(event) {
        event.preventDefault();
        var commentContent = $(this).find('textarea').val();
        if (commentContent) {
          var newComment = `
            <div class="media mb-3">
              <img src="https://via.placeholder.com/40" class="mr-3 rounded-circle" alt="...">
              <div class="media-body">
                <h6 class="mt-0">Tu Nombre</h6>
                ` + commentContent + `
              </div>
            </div>`;
          $(this).before(newComment);
          $(this).find('textarea').val('');
          $('.media-body').first().hide().fadeIn(800);
        }
      });
    });

    // Función para hacer la solicitud a la API de noticias
    function fetchNews() {
            const apiKey = "f0b00ca53b6e46cda812db9aef58b5d8";
            const url = `https://newsapi.org/v2/top-headlines?country=mx&apiKey=${apiKey}`;

            fetch(url)
                .then(response => response.json())
                .then(data => {
                    const newsTitle = document.getElementById("news-title");
                    const newsDescription = document.getElementById("news-description");
                    const newsLink = document.getElementById("news-link");
                    const publishedAt = document.getElementById("published-at");
                    const sourceInfo = document.getElementById("source-info");

                    // Mostrar la primera noticia
                    displayNews(data.articles[0]);

                    // Actualizar las noticias en un intervalo
                    let index = 1;
                    setInterval(() => {
                        if (index >= data.articles.length) {
                            index = 0;
                        }
                        displayNews(data.articles[index]);
                        index++;
                    }, 3000); // Cambiar cada 3 segundos
                })
                .catch(error => {
                    console.error("Error al obtener las noticias:", error);
                });
        }

        // Función para mostrar las noticias en una card
        function displayNews(article) {
            const newsTitle = document.getElementById("news-title");
            const newsDescription = document.getElementById("news-description");
            const newsLink = document.getElementById("news-link");
            const publishedAt = document.getElementById("published-at");
            const sourceInfo = document.getElementById("source-info");

            newsTitle.textContent = article.title;
            newsDescription.textContent = article.description ? article.description : '';
            newsLink.href = article.url;
            publishedAt.textContent = `Publicado el ${formatDate(article.publishedAt)}`;
            sourceInfo.innerHTML = `<i class="bi bi-person"></i> ${article.author ? article.author : 'Autor desconocido'} - <i class="bi bi-journal"></i> ${article.source.name}`;
        }

        // Función para el formato de  la fecha de noticia
        function formatDate(dateString) {
            const date = new Date(dateString);
            return date.toLocaleDateString('es-ES', { year: 'numeric', month: 'long', day: 'numeric', hour: 'numeric', minute: 'numeric' });
        }

        // Llamar a la función fetchNews al cargar la página
        window.onload = fetchNews;

    
  </script>
  </body>
  </html>
